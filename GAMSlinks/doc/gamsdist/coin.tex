%%%
%%% tabular with the option-table header
%%%
\renewenvironment{option_tabular}%
{\begin{tabular}{p{.16\textwidth}p{.65\textwidth}p{.11\textwidth}}
\hline
\textbf{Option}      &
\textbf{Description} &
\textbf{Default}     \\
\hline}
{\end{tabular}}

%%%
%%% list to use inside a tabular cell
%%%
\renewenvironment{tab_list}[1]%
{\begin{list}{}{\vspace*{-1.5ex}\renewcommand{\makelabel}{\desclabel}\parsep-0.15cm\labelwidth#1\leftmargin#1\setlength{\labelsep}{\itemindent}\topsep0cm\parskip0cm\partopsep0cm}}%
{\end{list}}

\newcommand{\BONMIN}{\textsc{Bonmin}\xspace}
\newcommand{\CBC}{\textsc{CBC}\xspace}
\newcommand{\COUENNE}{\textsc{Couenne}\xspace}
\newcommand{\IPOPT}{\textsc{Ipopt}\xspace}
\newcommand{\OS}{\textsc{OS}\xspace}
\newcommand{\OSI}{\textsc{OSI}\xspace}
\newcommand{\OSICPLEX}{\textsc{OsiCplex}\xspace}
\newcommand{\OSIGUROBI}{\textsc{OsiGurobi}\xspace}
\newcommand{\OSIGLPK}{\textsc{OsiGlpk}\xspace}
\newcommand{\OSIMOSEK}{\textsc{OsiMosek}\xspace}
\newcommand{\OSIXPRESS}{\textsc{OsiXpress}\xspace}
\newcommand{\CPLEX}{\textsc{CPLEX}\xspace}
\newcommand{\GUROBI}{\textsc{GUROBI}\xspace}
\newcommand{\GLPK}{\textsc{GLPK}\xspace}
\newcommand{\MOSEK}{\textsc{MOSEK}\xspace}
\newcommand{\XPRESS}{\textsc{XPRESS}\xspace}

\chapter{COIN-OR}
\textbf{Stefan Vigerske, Humboldt University Berlin, Germany}
\vspace{1cm}

\minitoc

\section{Introduction}

COIN-OR (\textbf{CO}mputational \textbf{IN}frastructure for \textbf{O}perations \textbf{R}esearch, \texttt{http://www.coin-or.org}) is an initiative to spur the development of open-source software for the operations research community~\cite{Lo03}.
One of the projects hosted at COIN-OR is the GAMSlinks project (\texttt{https://projects.coin-or.org/GAMSlinks}).
It is dedicated to the development of interfaces between \GAMS and open source solvers.
Some of these links and solvers have also found their way into the regular \GAMS distribution.
% They are currently available for Linux (32 and 64 bit), Windows (32 and 64 bit), Sun Solaris (Intel 64 bit), and Darwin (Intel 32 and 64 bit) systems.
With the availability of source code for the GAMSlinks the user is not limited to the out of the box solvers that come with a regular \GAMS distribution, but can extend and build these interfaces by themselves.

Available solvers and tools include:
\begin{itemize}
\item \BONMIN: Basic Open-source Nonlinear Mixed Integer programming\\
(model types: LP, RMIP, MIP, DNLP, NLP, RMINLP, MINLP, QCP, RMIQCP, MIQCP)
\item \CBC: COIN-OR Branch and Cut\\
(model types: LP, RMIP, MIP)
\item \COUENNE: Convex Over and Under Envelopes for Nonlinear Estimation\\
(model types: LP, RMIP, MIP, DNLP, NLP, RMINLP, MINLP, QCP, RMIQCP, MIQCP)
% \item CoinGlpk 4.39: Gnu Linear Programming Kit\\
% (model types: LP, MIP, RMIP)
\item \IPOPT: Interior Point Optimizer\\
(model types: LP, RMIP, DNLP, NLP, RMINLP, QCP, RMIQCP)
\item \OS: Optimization Services\\
(model types: LP, RMIP, MIP, DNLP, NLP, RMINLP, MINLP, QCP, RMIQCP, MIQCP)
\item \OSICPLEX, \OSIGLPK, \OSIGUROBI, \OSIMOSEK, \OSIXPRESS: Open Solver Interface\\
(model types: LP, RMIP, MIP)
\end{itemize}

For more information see the COIN-OR/GAMSlinks web site at
\texttt{https://projects.coin-or.org/GAMSlinks}.

\section{\BONMIN}

% \GAMS/\BONMIN brings the open source MINLP solver \BONMIN to the broad audience of \GAMS users.

\BONMIN (\textbf{B}asic \textbf{O}pen-source \textbf{N}onlinear \textbf{M}ixed \textbf{In}teger programming) is an open-source solver for mixed-integer nonlinear programming (MINLPs).
The code has been developed as part of a collaboration between Carnegie Mellon University and IBM Research.
The COIN-OR project leader for \BONMIN is Pierre Bonami.

\BONMIN implements six different algorithms for solving MINLPs:
\begin{itemize}
\setlength{\partopsep}{0pt}
\setlength{\itemsep}{0pt}
\item {B-BB} (\textbf{default}): a simple branch-and-bound algorithm based on solving a continuous nonlinear program at each node of the search tree and branching on integer variables~\cite{GuptaRavindran85}; this algorithm is similar to the one implemented in the solver \textsc{SBB}
\item {B-OA}: an outer-approximation based decomposition algorithm based on iterating solving and improving of a MIP relaxation and solving NLP subproblems~\cite{DuGr86,FlLe94}; this algorithm is similar to the one implemented in the solver \textsc{DICOPT}
\item {B-QG}: an outer-approximation based branch-and-cut algorithm based on solving a continuous linear program at each node of the search tree, improving the linear program by outer approximation, and branching on integer variables~\cite{QeGr92}.
\item {B-Hyb}: a branch-and-bound algorithm which is a hybrid of B-BB and B-QG and is based on solving either a continuous nonlinear or a continuous linear program at each node of the search tree, improving the linear program by outer approximation, and branching on integer variables~\cite{BBCCGLLLMSW}
\item {B-Ecp}: another outer-approximation based branch-and-cut algorithm inspired by the settings used in the solver \textsc{FilMINT}~\cite{AbLeLi07}
\item {B-iFP}: an iterated feasibility pump algorithm~\cite{BoCoLoMa06}
\end{itemize}
The algorithms are exact when the problem is \textbf{convex}, otherwise they are heuristics.

For convex MINLPs, experiments on a reasonably large test set of problems have shown that B-Hyb is the algorithm of choice (it solved most of the problems in 3 hours of computing time).
Nevertheless, there are cases where B-OA is much faster than B-Hyb and others where B-BB is interesting.
B-QG and B-Ecp corresponds mainly to a specific parameter setting of B-Hyb but they can be faster in some cases.
B-iFP is more tailored at finding quickly good solutions to very hard convex MINLP.
For \textbf{nonconvex} MINLPs, it is strongly recommended to use B-BB (the outer-approximation algorithms have not been tailored to treat nonconvex problems at this point).
Although even B-BB is only a heuristic for such problems, several options are available to try and improve the quality of the solutions it provides.

For more information we refer to \cite{BoGo08,BoKiLi09,BBCCGLLLMSW,BoCoLoMa06} and the \BONMIN web site \texttt{https://projects.coin-or.org/Bonmin}.
Most of the \BONMIN documentation in this section is taken from the \BONMIN manual~\cite{BonminManual}.

% \GAMS/BonminD is an experimental in-core communication link.
% It offers in-core communication between \GAMS and the solver, making potentially large model scratch files unnecessary.
% This links supports all features of the traditional link except for the \GAMS branch-cut-heuristic facility (BCH).

\subsection{Model requirements}

\BONMIN can handle mixed-integer nonlinear programming models which functions should be twice continuously differentiable.
The \BONMIN link in \GAMS supports continuous, binary, and integer variables, special ordered sets, branching priorities, but no semi-continuous or semi-integer variables (see chapter 17.1 of the \GAMS User's Guide).

If \GAMS/\BONMIN is called for a model with only continuous variables, the interface directly calls \IPOPT.
If \GAMS/\BONMIN is called for a model with only linear equations, the interface directly calls \CBC.

\subsection{Usage}

The following statement can be used inside your \GAMS program to specify using \BONMIN
\begin{verbatim}
  Option MINLP = BONMIN;    { or Option MIQCP = BONMIN; }
\end{verbatim}
This statement should appear before the \texttt{Solve} statement.
If \BONMIN was specified as the default solver during \GAMS installation, the above statement is not necessary.

\GAMS/\BONMIN currently does not support the \GAMS Branch-and-Cut-and-Heuristic (BCH) Facility.
If you need to use \GAMS/\BONMIN with BCH, please consider to use a \GAMS system of version $\leq 23.3$, available at \url{http://www.gams.com/download/download_old.htm}.
% \GAMS/\BONMIN supports the \GAMS Branch-and-Cut-and-Heuristic (BCH) Facility.
% The \GAMS BCH facility automates all major steps necessary to define, execute, and control the use of user defined routines within the framework of general purpose MIP and MINLP codes.
% Currently supported are user defined cut generators and heuristics, where cut generator cannot be used in Bonmins pure B\&B algorithm (B-BB).
% Please see the BCH documentation at \texttt{http://www.gams.com/docs/bch.htm} for further information.

\subsubsection{Specification of Options}

A \BONMIN option file contains both \IPOPT and \BONMIN options, for clarity all \BONMIN options should be preceded with the prefix ``\texttt{bonmin.}''. %, except those corresponding to the BCH facility.
The scheme to name option files is the same as for all other \GAMS solvers.
Specifying \texttt{optfile=1} let \GAMS/\BONMIN read \texttt{bonmin.opt}, \texttt{optfile=2} corresponds to \texttt{bonmin.op2}, and so on.
The format of the option file is the same as for \IPOPT (see Section \ref{sub:ipoptoptionspec}).

The most important option in \BONMIN is the choice of the solution algorithm.
This can be set by using the option named \texttt{bonmin.algorithm} which can be set to \texttt{B-BB}, \texttt{B-OA}, \texttt{B-QG}, \texttt{B-Hyb}, \texttt{B-Ecp}, or \texttt{B-iFP} (its default value is \texttt{B-BB}).
Depending on the value of this option, certain other options may be available or not, cf.\ Section~\ref{sub:bonminalloptions}.

An example of a \texttt{bonmin.opt} file is the following:
\begin{verbatim}
   bonmin.algorithm       B-Hyb
   bonmin.oa_log_level    4
   print_level            6
\end{verbatim}
%    bonmin.milp_subsolver  Cbc_Par
%    milp_sub.cover_cuts    0
%    userheurcall           "bchheur.gms reslim 10"
This sets the algorithm to be used to the hybrid algorithm, the level of outer approximation related output to $4$,
% the MIP subsolver for outer approximation to a parameterized version of CBC, switches off cover cutting planes for the MIP subsolver,
and sets the print level for \IPOPT to $6$.
%  and let \BONMIN call a user defined heuristic specified in the model \texttt{bchheur.gms} with a timelimit of 10 seconds.

\GAMS/\BONMIN understands currently the following \GAMS parameters: \texttt{reslim} (time limit), \texttt{iterlim} (iteration limit), \texttt{nodlim} (node limit), \texttt{cutoff}, \texttt{optca} (absolute gap tolerance), and \texttt{optcr} (relative gap tolerance).
One can set them either on the command line, e.g. \verb+nodlim=1000+, or inside your \GAMS program, e.g. \verb+Option nodlim=1000;+.

\subsubsection{Passing options to local search based heuristics and OA generators}
Several parts of the algorithms in \BONMIN are based on solving a simplified version of the problem with another instance of \BONMIN:
Outer Approximation Decomposition (called in {\tt B-Hyb} at the root node)
and Feasibility Pump for MINLP (called in {\tt B-Hyb} or {\tt B-BB} at the root node), RINS, RENS, Local Branching.

In all these cases, one can pass options to the sub-algorithm used through the option file.
The basic principle is that the ``\texttt{bonmin.}'' prefix  is replaced with a prefix that identifies the sub-algorithm used:
\begin{itemize}
\vspace{-2ex}
\setlength{\parskip}{.2ex}
\setlength{\itemsep}{0pt}
\setlength{\partopsep}{0pt}
\item to pass options to Outer Approximation Decomposition: {\tt oa\_decomposition.},
\item to pass options to Feasibility Pump for MINLP: {\tt pump\_for\_minlp.},
\item to pass options to RINS: {\tt rins.},
\item to pass options to RENS: {\tt rens.},
\item to pass options to Local Branching: {\tt local\_branch}.
\end{itemize}

\vspace{-2ex}
For example, to run a maximum of 60 seconds of feasibility pump (FP) for MINLP until 6 solutions are found at the beginning of the hybrid algorithm, one sets the following options:
\begin{verbatim}
bonmin.algorithm              B-Hyb
bonmin.pump_for_minlp         yes   # tells to run FP for MINLP
pump_for_minlp.time_limit     60    # set a time limit for the pump
pump_for_minlp.solution_limit 6     # set a solution limit
\end{verbatim}
Note that the actual solution and time limit will be the minimum of the global limits set for \BONMIN.

A slightly more complicated set of options may be used when using RINS.
Say for example that one wants to run RINS inside \texttt{B-BB}.
Each time RINS is called one wants to solve the small-size MINLP generated using B-QG (one may run any algorithm available in \BONMIN for solving an MINLP) and wants to stop as soon as \texttt{B-QG} found one solution.
To achieve this, one sets the following options
\begin{verbatim}
bonmin.algorithm      B-BB
bonmin.heuristic_rins yes
rins.algorithm        B-QG
rins.solution_limit   1
\end{verbatim}
This example shows that it is possible to set any option used in the sub-algorithm to be different than the one used for the main algorithm.

In the context of outer-approximation (OA) and feasibility pump for MINLP, a standard MILP solver is used.
Several options are available for configuring this MILP solver.
\BONMIN allows a choice of different MILP solvers through the option
\texttt{bonmin.milp\_sol\-ver}. Values for this option are: {\tt Cbc\_D} which uses \CBC with its
default settings, {\tt Cbc\_Par} which uses a version of \CBC that can be parameterized by the user, and \texttt{Cplex} which uses \CPLEX with its default settings.
The options that can be set in {\tt Cbc\_Par} are the number of strong-branching candidates,
the number of branches before pseudo costs are to be trusted, and the frequency of the various cut generators, c.f.\ Section~\ref{sub:bonminalloptions} for details.
The \texttt{Cplex} option is currently not available on Macintosh and Windows-64bit platforms.
Further, a valid \CPLEX licence (standalone or \GAMS/\CPLEX) is required.

\subsubsection{Getting good solutions to nonconvex problems}
To solve a problem with nonconvex constraints, one should only use the branch-and-bound algorithm {\tt B-BB}.

A few options have been designed in \BONMIN specifically to treat
problems that do not have a convex continuous relaxation.
In such problems, the solutions obtained from \IPOPT are
not necessarily globally optimal, but are only locally optimal.
Also the outer-approximation constraints are not necessarily valid inequalities for the problem.
No specific heuristic method for treating nonconvex problems is implemented
yet within the OA framework.
But for the pure branch-and-bound {\tt B-BB}, a few options have been implemented while having
in mind that lower bounds provided by \IPOPT should not be trusted and with the goal of
trying to get good solutions. Such options are at a very experimental stage.

First, in the context of nonconvex problems, \IPOPT may find different local optima when started
from different starting points. The two options {\tt num\_re\-solve\_at\_root} and {\tt num\_resolve\_at\_node}
allow for solving the root node or each node of the tree, respectively, with a user-specified
number of different randomly-chosen starting points, saving the best solution found.
Note that the function to generate a random starting point is very na\"{\i}ve:
it chooses a random point (uniformly) between the bounds provided for the variable.
In particular if there are some functions that can not be evaluated at some points of the domain, it may pick such points,
and so it is not robust in that respect.

Secondly, since the solution given by \IPOPT does not truly give a lower bound, the fathoming rule can be changed to continue branching even if the solution value to the current node is worse than the best-known solution.
This is achieved by setting {\tt allowable\_gap}
and {\tt allowable\_fraction\_gap} and {\tt cutoff\_decr} to negative values.

\subsubsection{\IPOPT options changed by \BONMIN}

\IPOPT has a very large number of options, see Section \ref{sub:ipoptoptions} to get a complete description.
To use \IPOPT more efficiently in the context of MINLP,
\BONMIN changes some \IPOPT options from their default values, which may help to improve \IPOPT's warm-starting capabilities and its ability to prove quickly that a subproblem is infeasible.
These are settings that \IPOPT does not use for ordinary NLP problems.
Note that options set by the user in an option file will override these settings.
\begin{itemize}
\vspace{-2ex}
\setlength{\partopsep}{0pt}
\setlength{\itemsep}{0pt}
\setlength{\parskip}{.5ex}
\item {\tt mu\_strategy} and {\tt mu\_oracle} are set, respectively, to
{\tt adaptive} and {\tt probing} by default. These are strategies in \IPOPT
for updating the barrier parameter. They were found to be more efficient in the context of MINLP.

\item {\tt gamma\_phi} and {\tt gamma\_theta} are set to $10^{-8}$ and $10^{-4}$ respectively.
This has the effect of reducing the size of the filter in the line search performed by \IPOPT.

\item {\tt required\_infeasibility\_reduction} is set to $0.1$.
This increases the required infeasibility reduction when \IPOPT enters the
restoration phase and should thus help to detect infeasible problems faster.

\item {\tt expect\_infeasible\_problem} is set to {\tt yes}, which enables some heuristics
to detect infeasible problems faster.

\item {\tt warm\_start\_init\_point} is set to {\tt yes} when a full primal/dual starting
point is available (generally for all the optimizations after the continuous relaxation has been solved).

\item {\tt print\_level} is set to $0$ by default to turn off \IPOPT output (except for the root node, which print level is controlled by the \BONMIN option \texttt{nlp\_log\_at\_root}).

\item \texttt{bound\_relax\_factor} is set to $10^{-10}$. All of the bounds
of the problem are relaxed by this factor. This may cause some trouble
when constraint functions can only be evaluated within their bounds.
In such cases, this option should be set to $0$.
\end{itemize}

\subsection{Detailed Options Description}
\label{sub:bonminalloptions}

The following tables gives the list of options together with their types, default values, and availability in each of the main algorithms.
% The column labeled `type' indicates the type of the parameter.
%  (`F' stands for float, `I' for integer, and `S' for string).
% The column labeled `default' indicates the global default value.
% Then for each of the algorithms \texttt{B-BB}, \texttt{B-OA}, \texttt{B-QG}, \texttt{B-Hyb}, \texttt{B-Ecp}, and \texttt{B-iFP} `$+$' indicates that the option is available for that particular algorithm, while `$-$' indicates that it is not.
The column labeled `\texttt{Cbc\_Par}' indicates the options that can be used to parametrize the MLIP subsolver in the context of OA and FP.

% \newpage
\input{optbonmin_s}

In the following we give a detailed list of \BONMIN options.
The value on the right denotes the default value.
\input{optbonmin_a}

\section{\CBC}
\label{sec:coincbc}
\hypertarget{sec:coincbc}{}

% \GAMS/\CBC brings the open source LP/MIP solver \CBC to the broad audience of \GAMS users.

\CBC (COIN-OR Branch and Cut) is an open-source mixed integer programming solver working with the COIN-OR LP solver \textsc{CLP} and the COIN-OR Cut generator library \textsc{Cgl}.
The code has been written primarily by John J. Forrest.

For more information we refer to the website of \CBC, \textsc{CGL}, and \textsc{CLP}:
\url{https://projects.coin-or.org/Cbc}, \url{https://projects.coin-or.org/Cgl}, \url{https://projects.coin-or.org/Clp}.
Most of the \CBC documentation in the section was copied from the help in the \CBC standalone version.

\subsection{Model requirements}

The \CBC link in \GAMS supports continuous, binary, integer, semicontinuous, semiinteger variables, special ordered sets of type 1 and 2, and branching priorities (see chapter 17.1 of the \GAMS User's Guide).
% Quadratic objective functions are not supported yet.

\subsection{Usage}

The following statement can be used inside your \GAMS program to specify using \CBC
\begin{verbatim}
  Option LP = CBC;     { or MIP or RMIP }
\end{verbatim}

The above statement should appear before the Solve statement.
If \CBC was specified as the default solver during \GAMS installation, the above statement is not necessary.

There are many parameters which can affect the performance the \CBC{}s Branch and Cut Algorithm.
First just try with default settings and look carefully at the log file.
Did cuts help? Did they take too long? Look at the output to see which cuts were effective and then do some tuning (see the option \hyperlink{cuts}{cuts}).
If the \hyperlink{preprocess}{preprocessing} reduced the size of the problem or strengthened many coefficients then it is probably wise to leave it on.
Switch off \hyperlink{heuristics}{heuristics} which did not provide solutions.
The other major area to look at is the search.
Hopefully good solutions were obtained fairly early in the search so the important point is to select the best variable to branch on.
See whether strong branching did a good job -- or did it just take a lot of iterations?
Adjust the options \hyperlink{strongbranching}{strongbranching} and \hyperlink{trustpseudocosts}{trustpseudocosts}.

\subsubsection{Specification of Options}

The \GAMS/\CBC options file consists of one option or comment per line.
An asterisk (*) at the beginning of a line causes the entire line to be ignored.
Otherwise, the line will be interpreted as an option name and value separated by any amount of white space (blanks or tabs).
Following is an example options file \texttt{cbc.opt}.
\begin{verbatim}
  cuts root
  perturbation off
\end{verbatim}
It will cause \CBC to use cut generators only in the root node and turns off the perturbation of the LP relaxation.

\GAMS/\CBC currently does not support the \GAMS Branch-and-Cut-and-Heuristic (BCH) Facility.
If you need to use \GAMS/\CBC with BCH, please consider to use a \GAMS system of version $\leq 23.3$, available at \url{http://www.gams.com/download/download_old.htm}.

% \GAMS/\CBC supports the \GAMS Branch-and-Cut-and-Heuristic (BCH) Facility.
% The \GAMS BCH facility automates all major steps necessary to define, execute, and control the use of user defined routines within the framework of general purpose MIP codes.
% Currently supported are user defined cut generators and heuristics.
% Please see the BCH documentation at \texttt{http://www.gams.com/docs/bch.htm} for further information.

\subsection{Options}

Among all \CBC options, the following \GAMS parameters are currently supported in \CBC:
\hyperlink{reslim}{reslim}, \hyperlink{iterlim}{iterlim}, \hyperlink{nodlim}{nodlim}, \hyperlink{optca}{optca}, \hyperlink{optcr}{optcr}, \hyperlink{increment}{cheat}, \hyperlink{cutoff}{cutoff}.

In the following, we summarize all available \CBC options.
\input{optcbc_s}  %TODO update?

In the following, we give a detailed description of all available \CBC options.
\input{optcbc_a}  %TODO update?

\section{\COUENNE}

% \GAMS/\COUENNE brings the open source MINLP solver \COUENNE to the broad audience of \GAMS users.

\COUENNE (\textbf{C}onvex \textbf{O}ver and \textbf{U}nder \textbf{En}velopes for \textbf{N}onlinear \textbf{E}stimation) is an open-source solver for nonconvex mixed-integer nonlinear programming (MINLPs).
The code has been developed originally in a cooperation of Carnegie Mellon University and IBM Research, and now at Lehigh University.
The COIN-OR project leader for \COUENNE is Pietro Belotti.

\COUENNE solves convex and nonconvex MINLPs by an LP based spatial branch-and-bound algorithm that is similar to the algorithm used in \textsc{BARON}.
The implementation extends \BONMIN by routines to compute valid linear outer approximations for nonconvex problems and methods for bound tightening and branching on nonlinear variables.

For more information on the algorithm we refer to \cite{Be09,BeLeLiMaWa08} and the \COUENNE web site \url{https://projects.coin-or.org/Couenne}.
Most of the \COUENNE documentation in this section is taken from the \COUENNE manual~\cite{CouenneManual}.

\subsection{Model requirements}

\COUENNE can handle mixed-integer nonlinear programming models which functions can be nonconvex, but should be twice continuously differentiable. Further, an algebraic description of the model need to be made available, which makes the use of some \GAMS functions and user-specified external functions impossible.
The \COUENNE link in \GAMS supports continuous, binary, and integer variables, but no special ordered sets, semi-continuous or semi-integer variables (see chapter 17.1 of the \GAMS User's Guide).

If \GAMS/\COUENNE is called for a linear model, the interface directly calls \CBC.

\subsection{Usage}

The following statement can be used inside your \GAMS program to specify using \COUENNE
\begin{verbatim}
  Option MINLP = COUENNE;     { or LP, RMIP, MIP, DNLP, NLP, RMINLP, QCP, RMIQCP, MIQCP }
\end{verbatim}

The above statement should appear before the Solve statement.
If \COUENNE was specified as the default solver during \GAMS installation, the above statement is not necessary.

\subsubsection{Specification of Options}

A \COUENNE option file contains \IPOPT, \BONMIN, and \COUENNE options, for clarity all \BONMIN options should be preceded with the prefix ``\texttt{bonmin.}'' and all \COUENNE options should be preceded with the prefix ``\texttt{couenne.}''.
All \IPOPT and many \BONMIN options are available in \COUENNE, please refer to the Sections~\ref{sub:ipoptoptions} and \ref{sub:bonminalloptions} for a detailed description.
The scheme to name option files is the same as for all other \GAMS solvers.
Specifying \texttt{optfile=1} let \GAMS/\COUENNE read \texttt{couenne.opt}, \texttt{optfile=2} corresponds to \texttt{couenne.op2}, and so on.
The format of the option file is the same as for \IPOPT (see Section~\ref{sub:ipoptoptionspec}).

\GAMS/\COUENNE understands currently the following \GAMS parameters: \texttt{reslim} (time limit), \texttt{nodlim} (node limit), \texttt{cutoff}, \texttt{optca} (absolute gap tolerance), and \texttt{optcr} (relative gap tolerance).
One can set them either on the command line, e.g. \verb+nodlim=1000+, or inside your \GAMS program, e.g. \verb+Option nodlim=1000;+.

\subsection{Detailed Options Description}
\label{sub:couenneoptions}

In the following we give a detailed list of options available for \COUENNE solely.
The value on the right denotes the default value.
Note that options specific to \IPOPT and \BONMIN are not listed her, see Sections \ref{sub:bonminalloptions} and \ref{sub:ipoptoptions} instead.

\input{optcouenne_a}

\section{\IPOPT}

% \GAMS/\IPOPT brings the open source NLP solver \IPOPT to the broad audience of \GAMS users.

\IPOPT (\textbf{I}nterior \textbf{P}oint \textbf{Opt}imizer) is an open-source solver for large-scale nonlinear programming.
The code has been written primarily by Andreas W\"achter, who is the COIN-OR project leader for \IPOPT.

\IPOPT implements an interior point line search filter method.
For more information on the algorithm we refer to~\cite{Waechter2002,WaBi06} and the \IPOPT web site \url{https://projects.coin-or.org/Ipopt}.
Most of the \IPOPT documentation in the section was taken from the \IPOPT manual~\cite{IpoptManual}.

\GAMS/\IPOPT uses \textsc{MUMPS}~4.9~\cite{AmestoyDuffKosterLExcellent2001,AmestoyGuermoucheLExcellentPralet2006} as linear solver, cf.~\url{http://graal.ens-lyon.fr/MUMPS}.

\subsection{Model requirements}

\IPOPT can handle nonlinear programming models which functions can be nonconvex, but should be twice continuously differentiable.

\subsection{Usage}

The following statement can be used inside your \GAMS program to specify using \IPOPT
\begin{verbatim}
  Option NLP = IPOPT;     { or LP, RMIP, DNLP, RMINLP, QCP, RMIQCP }
\end{verbatim}

The above statement should appear before the Solve statement.
If \IPOPT was specified as the default solver during \GAMS installation, the above statement is not necessary.

\subsubsection{The linear solver in \IPOPT}
\label{ipoptlinearsolver}
\hypertarget{ipoptlinearsolver}{}

The performance and robustness of \IPOPT on larger models heavily relies on the used solver for sparse symmetric indefinite linear systems.
\GAMS/\IPOPT includes the sparse solver MUMPS 4.9~\cite{AmestoyDuffKosterLExcellent2001,AmestoyGuermoucheLExcellentPralet2006}.
The user can provide the Parallel Sparse Direct Solver PARDISO or routines from the Harwell Subroutine Library (HSL) as shared (or dynamic) libraries to replace MUMPS.

\paragraph{Using Harwell Subroutine Library routines with \GAMS/\IPOPT.}

\GAMS/\IPOPT can use the HSL routines \texttt{MA27}, \texttt{MA28}, \texttt{MA57}, and \texttt{MC19} when provided as shared library.
By telling \IPOPT to use one of these routines (see options \texttt{linear\_solver}, \texttt{linear\_system\_scaling}, \texttt{nlp\_scaling\_method}, \texttt{dependency\_detector}), \GAMS/\IPOPT attempts to load the required routines from the library \texttt{libhsl.so} (Unix-Systems), \texttt{libhsl.dylib} (MacOS X), or \texttt{libhsl.dll} (Windows), respectively.
You can also specify the path and name for this library with the option \texttt{hsl\_library}.
For example,
\begin{verbatim}
 linear_solver ma27
 hsl_library   /my/path/to/the/hsllib/myhsllib.so
\end{verbatim}
tells \IPOPT to use the linear solver MA27 from the HSL library \verb=myhsllib.so= under the specified path.

The HSL routines \texttt{MA27}, \texttt{MA28}, and \texttt{MC19} are available at \url{http://www.cse.clrc.ac.uk/nag/hsl}.
Note that it is your responsibility to ensure that you are entitled to download and use these routines!
You can build a shared library using the ThirdParty/HSL project at COIN-OR.

\paragraph{Using PARDISO with \GAMS/\IPOPT.}
Setting the option \texttt{linear\_solver} to \texttt{pardiso}, let \GAMS/\IPOPT attempt to load the linear solver PARDISO from the library \texttt{libpardiso.so} (Unix-Systems), \texttt{libpardiso.dylib} (MacOS X), or \texttt{libpardiso.dll} (Windows), respectively.
You can also specify the path and name for this library with the option \texttt{pardiso\_library}.
For example,
\begin{verbatim}
 linear_solver   pardiso
 pardiso_library /my/path/to/the/pardisolib/mypardisolib.so
\end{verbatim}
tells \IPOPT to use the linear solver PARDISO from the library \texttt{mypardisolib.so} under the specified path.

PARDISO is available as compiled shared library for several platforms at \texttt{http://www.pardiso-project.org}.
Note that it is your responsibility to ensure that you are entitled to download and use this package!


\subsubsection{Specification of Options}
\label{sub:ipoptoptionspec}

\IPOPT has many options that can be adjusted for the algorithm (see Section \ref{sub:ipoptoptions}).
Options are all identified by a string name, and their values can be of one of three types: Number (real), Integer, or String.
Number options are used for things like tolerances, integer options are used for things like maximum number of iterations, and string options are used for setting algorithm details, like the NLP scaling method.
Options can be set by creating a \texttt{ipopt.opt} file in the directory you are executing \IPOPT.

The \texttt{ipopt.opt} file is read line by line and each line should contain the option name, followed by whitespace, and then the value.
Comments can be included with the \# symbol. Don't forget to ensure you have a newline at the end of the file. For example,
\begin{verbatim}
# This is a comment

# Turn off the NLP scaling
nlp_scaling_method none

# Change the initial barrier parameter
mu_init 1e-2

# Set the max number of iterations
max_iter 500
\end{verbatim}
is a valid \texttt{ipopt.opt} file.

% You can print the documentation for all \IPOPT options by using the option
% \begin{verbatim}
% print_options_documentation yes
% \end{verbatim}
% and running \IPOPT.
% This will output all of the options documentation to the console.

\GAMS/\IPOPT understand currently the following \GAMS parameters: \texttt{reslim} (time limit), \texttt{iterlim} (iteration limit), \texttt{domlim} (domain violation limit).
You can set them either on the command line, e.g. \verb+iterlim=500+, or inside your \GAMS program, e.g. \verb+Option iterlim=500;+.


\subsection{Output}

This section describes the standard \IPOPT console output.
The output is designed to provide a quick summary of each iteration as \IPOPT solves the problem.

Before \IPOPT starts to solve the problem, it displays the problem statistics (number of nonzero-elements in the matrices, number of variables, etc.).
Note that if you have fixed variables (both upper and lower bounds are equal), \IPOPT may remove these variables from the problem internally and not include them in the problem statistics.

Following the problem statistics, \IPOPT will begin to solve the problem and you will see output resembling the following,
\begin{verbatim}
iter    objective    inf_pr   inf_du lg(mu)  ||d||  lg(rg) alpha_du alpha_pr  ls
   0  1.6109693e+01 1.12e+01 5.28e-01   0.0 0.00e+00    -  0.00e+00 0.00e+00   0
   1  1.8029749e+01 9.90e-01 6.62e+01   0.1 2.05e+00    -  2.14e-01 1.00e+00f  1
   2  1.8719906e+01 1.25e-02 9.04e+00  -2.2 5.94e-02   2.0 8.04e-01 1.00e+00h  1
\end{verbatim}
and the columns of output are defined as
\begin{description}
\item[iter]
The current iteration count.
This includes regular iterations and iterations while in restoration phase.
If the algorithm is in the restoration phase, the letter r' will be appended to the iteration number.
\item[objective]
The unscaled objective value at the current point.
During the restoration phase, this value remains the unscaled objective value for the original problem.
\item[inf\_pr]
The scaled primal infeasibility at the current point.
During the restoration phase, this value is the primal infeasibility of the original problem at the current point.
\item[inf\_du]
The scaled dual infeasibility at the current point.
During the restoration phase, this is the value of the dual infeasibility for the restoration phase problem.
\item[lg(mu)]
$\log_{10}$ of the value of the barrier parameter mu.
\item[$\Vert d\Vert$]
The infinity norm (max) of the primal step (for the original variables $x$ and the internal slack variables $s$).
During the restoration phase, this value includes the values of additional variables, $p$ and $n$.
\item[lg(rg)]
$\log_{10}$ of the value of the regularization term for the Hessian of the Lagrangian in the augmented system.
\item[alpha\_du]
The stepsize for the dual variables.
\item[alpha\_pr]
The stepsize for the primal variables.
\item[ls]
The number of backtracking line search steps.
\end{description}

When the algorithm terminates, \IPOPT will output a message to the screen based on the return status of the call to Optimize.
The following is a list of the possible output messages to the console, and a brief description.

\begin{description}
\item[Optimal Solution Found.] ~

    This message indicates that \IPOPT found a (locally) optimal point within the desired tolerances.

\item[Solved To Acceptable Level.] ~

    This indicates that the algorithm did not converge to the ``desired'' tolerances, but that it was able to obtain a point satisfying the ``acceptable'' tolerance level as specified by acceptable-* options.
    This may happen if the desired tolerances are too small for the current problem.

\item[Converged to a point of local infeasibility. Problem may be infeasible.] ~

    The restoration phase converged to a point that is a minimizer for the constraint violation (in the $\ell_1$-norm), but is not feasible for the original problem.
    This indicates that the problem may be infeasible (or at least that the algorithm is stuck at a locally infeasible point).
    The returned point (the minimizer of the constraint violation) might help you to find which constraint is causing the problem.
    If you believe that the NLP is feasible, it might help to start the optimization from a different point.

\item[Search Direction is becoming Too Small.] ~

    This indicates that \IPOPT is calculating very small step sizes and making very little progress.
    This could happen if the problem has been solved to the best numerical accuracy possible given the current scaling.

\item[Iterates divering; problem might be unbounded.] ~

    This message is printed if the max-norm of the iterates becomes larger than the value of the option diverging\_iterates\_tol.
    This can happen if the problem is unbounded below and the iterates are diverging.

\item[Stopping optimization at current point as requested by user.] ~

    This message is printed if either the time limit or the domain violation limit is reached.

\item[Maximum Number of Iterations Exceeded.] ~

    This indicates that \IPOPT has exceeded the maximum number of iterations as specified by the option max\_iter.

\item[Restoration Failed!] ~

    This indicates that the restoration phase failed to find a feasible point that was acceptable to the filter line search for the original problem.
    This could happen if the problem is highly degenerate or does not satisfy the constraint qualification, or if an external function in \GAMS provides incorrect derivative information.

\item[Error in step computation (regularization becomes too large?)!] ~

    This messages is printed if \IPOPT is unable to compute a search direction, despite several attempts to modify the iteration matrix.
    Usually, the value of the regularization parameter then becomes too large.

\item[Problem has too few degrees of freedom.] ~

    This indicates that your problem, as specified, has too few degrees of freedom.
    This can happen if you have too many equality constraints, or if you fix too many variables (\IPOPT removes fixed variables).

\item[Not enough memory.] ~

    An error occurred while trying to allocate memory.
    The problem may be too large for your current memory and swap configuration.

\item[INTERNAL ERROR: Unknown SolverReturn value - Notify \IPOPT Authors.] ~

    An unknown internal error has occurred. Please notify the authors of the \GAMS/\IPOPT link or \IPOPT (refer to \url{https://projects.coin-or.org/GAMSlinks} or \url{https://projects.coin-or.org/Ipopt}).
\end{description}


\subsection{Detailed Options Description}
\label{sub:ipoptoptions}

% Note, that \GAMS/\IPOPT overwrites the \IPOPT default setting for the parameters \texttt{bound\_relax\_factor} (set to $10^{-10}$) and \texttt{mu\_strategy} (set to \texttt{adaptive}).
% You can change these values by specifying these options in your \IPOPT options file.

\input{optipopt_a}

\section{Optimization Services}

\OS (\textbf{O}ptimization \textbf{S}ervices) is an initiative to provide a set of standards for representing optimization instances, results, solver options, and communication between clients and solvers in a distributed environment using Web Services.
The code has been written primarily by Horand Gassmann, Jun Ma, and Kipp Martin.
Kipp Martin is the COIN-OR project leader for \OS.

For more information we refer to the \OS manual~\cite{Ma2005}, the papers~\cite{FourerMaMartin2009,FourerMaMartin2010,OSManual}, and the web sites \url{http://www.optimizationservices.org} and \url{https://projects.coin-or.org/OS}.

The \OS link in \GAMS allows you to convert instances of \GAMS models into the \OS instance language (OSiL) format and let an Optimization Services Server solve your instances remotely.

\subsection{Model requirements}

\OS supports continuous, binary, and integer variables, linear and nonlinear equations.
Special ordered sets, semicontinuous or semiinteger variables, and indicator constraints are currently not supported.
Initial values are currently not supported by the \GAMS/\OS link.

\subsection{Usage}

The following statement can be used inside your \GAMS program to specify using \OS
\begin{verbatim}
  Option MINLP = OS;     { or LP, RMIP, MIP, DNLP, NLP, RMINLP, QCP, RMIQCP, MIQCP }
\end{verbatim}

The above statement should appear before the Solve statement.

By default, for a given instance of a \GAMS model, nothing happens.
To solve an instance remotely, you have to specify the URL of an Optimization Services Server via the option \texttt{service}.
Usually, the server chooses an appropriate solver for your instance, depending on their availability on the server.
A fully equipped server chooses
\textsc{CLP} for continuous linear models (LP and RMIP),
\IPOPT for continuous nonlinear models (NLP, DNLP, RMINLP, QCP, RMIQCP),
\CBC for mixed-integer linear models (MIP), and
\BONMIN for mixed-integer nonlinear models (MIQCP, MINLP).
An easy way to influence the choice of the solver on the server is the \texttt{solver} option.

Further options can be provided in an OSoL (Optimization Services Options Language) file, which is specified via the the \texttt{readosol} option.
An example OSoL file looks like
\begin{verbatim}
<?xml version="1.0" encoding="UTF-8"?>
<osol xmlns="os.optimizationservices.org" xmlns:xs="http://www.w3.org/2001/XMLSchema"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:schemaLocation="os.optimizationservices.org
                          http://www.optimizationservices.org/schemas/2.0/OSoL.xsd">
<optimization>
  <solverOptions numberOfSolverOptions="3">
    <solverOption name="cuts" solver="cbc" value="off" />
    <solverOption name="max_active_nodes" solver="symphony"  value="2" />
    <solverOption name="max_iter" solver="ipopt" type="integer" value="2000"/>
  </solverOptions>
</optimization>
</osol>
\end{verbatim}
It specifies that if \CBC is used, then cutting planes are disabled,
if \textsc{SYMPHONY} is used, then at most 2 nodes should be active,
and if \IPOPT is used, then a limit of 2000 iterations is imposed.

By default, the call to the server is a \emph{synchronous} call.
The \GAMS process will wait for the result and then display the result.
This may not be desirable when solving large optimization models.
In order to use the remote solver service in an \emph{asynchronous} fashion, one can make use of the \GAMS Grid Computing Facility, see Appendix I in the \GAMS manual.

\subsection{Detailed Options Descriptions}

\input{optosd_a}

\section{\OSICPLEX, \OSIGLPK, \OSIGUROBI, \OSIMOSEK, \OSIXPRESS}

The ``bare bone'' solver links \GAMS/\OSICPLEX, \GAMS/\OSIGLPK, \GAMS/\OSIGUROBI, \GAMS/\OSIMOSEK, and \GAMS/\OSIXPRESS
allow users to solve their \GAMS models with a \GLPK or a standalone license of \CPLEX, \GUROBI, \MOSEK, or \XPRESS.
The links use the COIN-OR Open Solver Interface (\OSI) to communicate with these solvers.
The \OSICPLEX link has been written primarily by Tobias Achterberg,
the \OSIGLPK link has been written by Vivian De Smedt, Braden Hunsaker, and Lou Hafer,
the \OSIGUROBI link has been written primarily by Stefan Vigerske,
the \OSIMOSEK link has been written primarily by Bo Jensen, and
the \OSIXPRESS link has been written primarily by John Doe.
Matthew Saltzman is the COIN-OR project leader for \OSI.

For more information we refer to the \OSI web site \texttt{https://projects.coin-or.org/Osi}.

\subsection{Model requirements}

The \OSI links support linear equations and continuous, binary, and integer variables.
Semicontinuous and Semiinteger variables, special ordered sets, branching priorities, and indicator constraints are not supported by \OSI.

\subsection{Usage}

The following statement can be used inside your \GAMS program to specify using \OSIGUROBI
\begin{verbatim}
  Option MIP = OSIGUROBI;     { or LP or RMIP }
\end{verbatim}

The above statement should appear before the Solve statement.

The links support the general \GAMS options \texttt{reslim}, \texttt{optca} (except for \OSIGLPK), \texttt{optcr}, \texttt{nodlim}, and \texttt{iterlim}.
For \OSICPLEX, \OSIGUROBI, \OSIMOSEK, and \OSIXPRESS an option file in the format required by the solver can be provided via the \GAMS \texttt{optfile} option.
For \OSIGLPK, an \GAMS option file can be provided, see Section~\ref{sub:glpkoptions} for details.

If a MIP is solved via one of the \OSI links, only primal solution values are reported by default.
To receive also the dual values for the LP that is obtained from the MIP by fixing all discrete variables, the \GAMS option \texttt{integer1} can be set to a nonzero value. Note that this may lead to solving another LP after the MIP solve has finished.

Setting the \GAMS option \texttt{integer2} to a nonzero value makes variable and equation names available to the solver.
This option may be useful for debugging purposes.

Setting the \GAMS option \texttt{integer3} to a nonzero value leads to writing the model instance to a file in MPS format before starting the solution process.
The name of the MPS file is chosen to be the name of the \GAMS model file with the extension \texttt{.gms} replaced by \texttt{.mps}.
This option may be useful for debugging purposes.

\subsection{\OSIGLPK Options}
\label{sub:glpkoptions}

The \OSIGLPK option file consists of one option or comment per line.
An asterisk (*) at the beginning of a line causes the entire line to be ignored.
Otherwise, the line will be interpreted as an option name and value separated by any amount of white space (blanks or tabs).
Following is an example options file osiglpk.opt.
\begin{verbatim}
  factorization givens
\end{verbatim}
It will cause \OSIGLPK to use Givens rotation updates for the factorization. (This option setting might help to avoid numerical difficulties in some cases.)

\input{optglpk_a}

\bibliographystyle{plain}
\bibliography{coin_scip}

\chapterend
