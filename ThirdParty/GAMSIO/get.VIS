#!/bin/sh

echo " "
echo "Running script for downloading the GAMS I/O libraries for Windows platform"
echo " "

wgetcount=`which wget 2>/dev/null | wc -w`
if test ! $wgetcount = 1; then
  echo "Utility wget not found in your PATH."
  exit -1
fi

decompress=INVALID
for tool in unzip
do
  toolcount=`which $tool 2>/dev/null | wc -w`
  if test $toolcount = 1; then
    if test $tool = unzip ; then
      decompress="unzip -o"
    fi
    break
  else
    echo "Utility $tool not found in your PATH."
  fi
done

if test "$decompress" = INVALID ; then
  echo "Do not know how to unpack ZIP files."
  exit -1 
fi 

MACHINECODE=VIS
. ./FILES
FILES="${IOLIB_FILES} ${SMAGLIB_FILES}"

mkdir -p VIS
cd VIS
rm -f $FILES

echo "Downloading the libraries from www.gams.com..."
for file in $FILES
do
	wget http://www.gams.com/~svigerske/$file
done

echo "Unpacking the libraries..."
for file in $FILES
do
	$decompress $file
done

echo "Deleting the zip files..."
rm -f $FILES

echo " "
echo "Done downloading the GAMS I/O libraries."
echo " "
